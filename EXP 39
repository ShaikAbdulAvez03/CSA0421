/* cscan_disk.c */
#include <stdio.h>
#include <stdlib.h>

int main(){
    int n, head, disk_size, dir;
    printf("Requests count: "); scanf("%d",&n);
    int req[100];
    printf("Requests: ");
    for(int i=0;i<n;i++) scanf("%d",&req[i]);
    printf("Initial head: "); scanf("%d",&head);
    printf("Disk size (max cylinder): "); scanf("%d",&disk_size);
    printf("Direction (0=left,1=right): "); scanf("%d",&dir);

    // sort
    for(int i=0;i<n-1;i++) for(int j=i+1;j<n;j++) if(req[i]>req[j]) {int t=req[i]; req[i]=req[j]; req[j]=t;}

    int idx=0; while(idx<n && req[idx]<head) idx++;
    int seek=0;
    if(dir==1){
        for(int i=idx;i<n;i++){ seek += abs(req[i]-head); head=req[i]; }
        // jump to beginning (no servicing)
        seek += abs((disk_size-1)-head);
        head = 0;
        for(int i=0;i<idx;i++){ seek += abs(req[i]-head); head=req[i]; }
    } else {
        for(int i=idx-1;i>=0;i--){ seek += abs(req[i]-head); head=req[i]; }
        seek += abs(head-0);
        head = disk_size-1;
        for(int i=n-1;i>=idx;i--){ seek += abs(req[i]-head); head=req[i]; }
    }
    printf("Total seek = %d\n", seek);
    return 0;
}
